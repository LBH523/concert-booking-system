# 音乐会订票系统测试

## 📋 概述

本测试套件为音乐会订票系统提供全面的单元测试和集成测试，覆盖所有主要功能模块。

## 🎯 测试覆盖的功能模块

### 1. 用户管理模块 (`test_user.py`)
- **FR-UM-001**: 用户注册功能
  - 成功注册测试
  - 用户名重复测试
  - 缺少参数测试
- **FR-UM-002**: 用户登录功能
  - 成功登录测试
  - 无效凭据测试
  - 会话管理测试
  - 管理员权限测试

### 2. 场次管理模块 (`test_admin_event.py`)
- **FR-EM-001**: 添加场次功能
  - 成功添加场次
  - 带海报添加场次
  - 重复场次名称测试
  - 权限验证测试
- **FR-EM-002**: 编辑/删除场次功能
  - 成功编辑场次
  - 成功删除场次
  - 权限验证测试

### 3. 订票模块 (`test_ticket_booking.py`)
- **FR-TK-001**: 场次查询功能
  - 按日期查询
  - 按名称查询（支持大小写不敏感）
  - 无结果查询
- **FR-TK-002**: 座位选购功能
  - 成功订票
  - 价格计算验证
  - 库存管理验证
  - 订票限制测试（最多4张）
  - 并发处理测试

### 4. 订单管理模块 (`test_admin_order.py`)
- **FR-OM-001**: 订单查询功能
  - 用户订单查询
  - 管理员订单查询
  - 订单状态过滤
- **FR-OM-002**: 订单取消功能
  - 成功取消订单
  - 库存释放验证
  - 触发器功能测试

### 5. 数据库模块 (`test_database.py`)
- 数据库连接测试
- SQL查询功能测试
- 座位预订核心逻辑测试
- 数据库约束验证
- 触发器功能测试
`


## 🛠️ 测试框架和工具

- **pytest**: 测试框架
- **coverage.py**: 代码覆盖率工具
- **Flask Testing**: Flask应用测试扩展
- **SQLite**: 测试数据库

## 📁 测试文件结构

```
tests/
├── __init__.py
├── conftest.py          # pytest配置和fixtures
├── test_user.py         # 用户管理模块测试
├── test_admin_event.py  # 场次管理模块测试
├── test_ticket_booking.py  # 订票模块测试
├── test_admin_order.py  # 订单管理模块测试
├── test_database.py     # 数据库模块测试
└── README.md           # 本文件
```







